(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _blacklist_es2015=require("./blacklist_es2015"),_blacklist_es20152=_interopRequireDefault(_blacklist_es2015),_fetcher_es2015Js=require("./fetcher_es2015.js"),_fetcher_es2015Js2=_interopRequireDefault(_fetcher_es2015Js),_whitelist_es2015Js=require("./whitelist_es2015.js"),_whitelist_es2015Js2=_interopRequireDefault(_whitelist_es2015Js),app={blacklist:_blacklist_es20152["default"],whitelist:_whitelist_es2015Js2["default"],fetcher:_fetcher_es2015Js2["default"]};!function(e,t,s){function i(e){var t=new URL(e.url).hostname;return e.tabId?(chrome.tabs.sendMessage(e.tabId,{action:"addToBlocklist",domain:t},function(t){t&&t.success&&(chrome.browserAction.setBadgeText({text:t.blocklist.length?t.blocklist.length.toString():"",tabId:e.tabId}),t.notified||chrome.notifications.create({type:"basic",title:"Malicious request blocked",iconUrl:"/images/cymon-icon.png",message:"A web request on this page was deemed malicious by Cymon and has been blocked"}))}),"main_frame"==e.type?{redirectUrl:chrome.extension.getURL("/html/redirectPage.html?url="+encodeURIComponent(e.url))}:{cancel:!0}):void 0}function n(){var s=[];return $.each($(e.get()).not(t.get()).get(),function(e,t){s.push("*://"+t+"/*")}),s}function c(){var e=n();chrome.webRequest.onBeforeRequest.removeListener(i),e.length&&chrome.webRequest.onBeforeRequest.addListener(i,{urls:e},["blocking"])}chrome.runtime.onInstalled.addListener(function(){chrome.runtime.sendMessage({action:"fetchEvent"})}),chrome.runtime.onStartup.addListener(function(){chrome.runtime.sendMessage({action:"updateEvent"})}),chrome.runtime.onMessage.addListener(function(t,i,n){switch(t.action){case"updateEvent":c(),n({success:!0});break;case"fetchEvent":s.fetchBlacklist(e),n({success:!0});break;default:n({success:!1})}})}(app.blacklist,app.whitelist,app.fetcher),window.app=app;
},{"./blacklist_es2015":2,"./fetcher_es2015.js":3,"./whitelist_es2015.js":4}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(){function e(){return o}function t(e){return e&&e.constructor===Array?(o=e,chrome.storage.local.set({blacklist:o}),chrome.runtime.sendMessage({action:"updateEvent"}),!0):!1}function r(e){if(e&&e.constructor===Array){var t={};return $.each(o,function(e,r){t[r]=!0}),$.each(e,function(e,r){t[r]=!0}),o=Object.keys(t),chrome.storage.local.set({blacklist:o}),chrome.runtime.sendMessage({action:"updateEvent"}),!0}return!1}var o=[];return chrome.storage.local.get(function(e){o=e.blacklist||o}),{get:e,set:t,add:r}}(),module.exports=exports["default"];
},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(){function e(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET","http://cymoncommunity-dev-wartenuq33.elasticbeanstalk.com/api/nexus/v1/blacklist/domain/"+encodeURIComponent(e)+"/?days="+encodeURIComponent(m)+"&limit=25000"),o.onload=function(){if(200==o.status){var e=[];$.each(JSON.parse(o.response).results,function(t,n){e.push(n.name)}),t(e)}else n(Error(o.statusText))},o.onerror=function(){n(Error("There was an error fetching domains from Cymon."))},o.send()})}function t(t){var n=[];t.set([]),$.each(f,function(e,t){t&&n.push(e)}),n.length&&($.each(n,function(n,o){e(o).then(function(e){t.add(e),chrome.runtime.sendMessage({action:"updateEvent"})})}),this.setLastFetch((new Date).getTime()))}function n(){return d&&clearTimeout(d),d=setTimeout(function(){chrome.runtime.sendMessage({action:"fetchEvent"})},p>0?p+36e5*l-(new Date).getTime():0),!0}function o(e){return e&&"object"==typeof e?(f=e,chrome.storage.sync.set({tags:f}),chrome.runtime.sendMessage({action:"fetchEvent"}),!0):!1}function r(e){return e&&"number"==typeof e&&e%1===0&&e>0&&3>=e?(m=e,chrome.storage.sync.set({fetchLookback:m}),!0):!1}function c(e){return e&&"number"==typeof e&&e%1===0&&e>0&&24>=e?(l=e,chrome.storage.sync.set({fetchInterval:l}),this.updateFetchTimer(),!0):!1}function s(e){return e&&"number"==typeof e&&e%1==0?(p=e,chrome.storage.sync.set({lastFetch:p}),this.updateFetchTimer(),!0):!1}function a(){return f}function u(){return m}function i(){return l}function h(){return p}var f={blacklist:!1,botnet:!1,dnsbl:!0,"malicious activity":!1,malware:!1,phishing:!1,spam:!1},m=1,l=24,p=0,d=0;return chrome.storage.sync.get(function(e){f=e.tags||f,m=e.fetchLookback||m,l=e.fetchInterval||l,p=e.lastFetch||p}),{fetchBlacklist:t,updateFetchTimer:n,setTags:o,setFetchLookback:r,setFetchInterval:c,setLastFetch:s,getTags:a,getFetchLookback:u,getFetchInterval:i,getLastFetch:h}}(),module.exports=exports["default"];
},{}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(){function e(){return s}function t(e){return"string"==typeof e&&-1==s.indexOf(e)?(s.push(e),chrome.storage.sync.set({whitelist:s}),chrome.runtime.sendMessage({action:"updateEvent"}),!0):!1}function n(e){if("string"==typeof e){var t=s.indexOf(e);return-1!=t?(s.splice(t,1),chrome.storage.sync.set({whitelist:s}),chrome.runtime.sendMessage({action:"updateEvent"}),!0):!1}return!1}function r(){return s=[],chrome.storage.sync.set({whitelist:[]}),chrome.runtime.sendMessage({action:"updateEvent"}),!0}var s=[];return chrome.storage.sync.get(function(e){s=e.whitelist||s}),{get:e,add:t,remove:n,clear:r}}(),module.exports=exports["default"];
},{}]},{},[1])


//# sourceMappingURL=bundle.map.json